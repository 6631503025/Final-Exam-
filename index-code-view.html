<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Code View - Final-Exam-</title>
    <style>
      body{font-family:Inter,system-ui,Arial,sans-serif;margin:0;background:#f7fafc;color:#0f172a}
      header{background:#111827;color:#fff;padding:18px}
      .wrap{max-width:1100px;margin:20px auto;padding:0 16px}
      details{margin-bottom:12px;background:#fff;border-radius:8px;padding:10px;box-shadow:0 6px 18px rgba(15,23,42,0.04)}
      summary{font-weight:700;cursor:pointer}
      textarea{width:100%;height:320px;border:1px solid #e6eefb;border-radius:6px;padding:12px;font-family:monospace;white-space:pre;overflow:auto}
      .muted{color:#6b7280;font-size:13px}
    </style>
  </head>
  <body>
    <header>
      <div class="wrap">
        <div style="display:flex;align-items:center;gap:12px"><div style="font-size:18px;font-weight:800">Final-Exam- â€” Code View</div><div class="muted">(static snapshot of files in <code>src/</code>)</div></div>
      </div>
    </header>

    <main class="wrap">
      <p class="muted">Double-click a file below to expand and view its source. This file is safe to open without running the dev server.</p>

      <details open>
        <summary>/src/main.jsx</summary>
        <textarea readonly>
import React from 'react'
import { createRoot } from 'react-dom/client'
import App from './App'
import './styles/global.css'

createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
)

        </textarea>
      </details>

      <details>
        <summary>/src/App.jsx</summary>
        <textarea readonly>
import React from 'react'
import { BrowserRouter, Routes, Route } from 'react-router-dom'
import { CartProvider } from './context/CartContext'
import Navbar from './components/Navbar'
import ProductListPage from './pages/ProductListPage'
import CartPage from './pages/CartPage'
import CheckoutPage from './pages/CheckoutPage'

export default function App(){
  return (
    <CartProvider>
      <BrowserRouter>
        <Navbar />
        <div style={{maxWidth:1000,margin:'24px auto',padding:'0 16px'}}>
          <Routes>
            <Route path="/" element={<ProductListPage />} />
            <Route path="/cart" element={<CartPage />} />
            <Route path="/checkout" element={<CheckoutPage />} />
          </Routes>
        </div>
      </BrowserRouter>
    </CartProvider>
  )
}

        </textarea>
      </details>

      <details>
        <summary>/src/context/CartContext.jsx</summary>
        <textarea readonly>
import React, { createContext, useContext, useState, useMemo } from 'react'

const CartContext = createContext(null)

export function useCart(){
  return useContext(CartContext)
}

export function CartProvider({ children }){
  const [cart, setCart] = useState([]) // { product: {id,name,price,imageUrl}, qty }

  const addToCart = (product, qty = 1) => {
    console.log('addToCart called with', product, 'qty', qty)
    setCart(c => {
      const found = c.find(i => i.product.id === product.id)
      if(found){
        return c.map(i => i.product.id === product.id ? { ...i, qty: i.qty + qty } : i)
      }
      return [{ product, qty }, ...c]
    })
  }

  const removeFromCart = (productId) => setCart(c => c.filter(i => i.product.id !== productId))

  const updateQuantity = (productId, qty) => setCart(c => c.map(i => i.product.id === productId ? { ...i, qty: Math.max(1, qty) } : i))

  const clearCart = () => setCart([])

  const count = useMemo(() => cart.reduce((s,i) => s + i.qty, 0), [cart])
  const total = useMemo(() => cart.reduce((s,i) => s + i.qty * (i.product.price || 0), 0), [cart])

  const value = { cart, addToCart, removeFromCart, updateQuantity, clearCart, count, total }

  return <CartContext.Provider value={value}>{children}</CartContext.Provider>
}

export default CartContext

        </textarea>
      </details>

      <details>
        <summary>/src/pages/ProductListPage.jsx</summary>
        <textarea readonly>
import React, { useState } from 'react'
import ProductCard from '../components/ProductCard'
import ProductForm from '../components/ProductForm'
import { useCart } from '../context/CartContext'

const SAMPLE = [
  { id: 'p1', name: 'Laptop Pro', price: 1299.99, imageUrl: new URL('../assets/laptop.svg', import.meta.url).href },
  { id: 'p2', name: 'Wireless Mouse', price: 49.99, imageUrl: new URL('../assets/mouse.svg', import.meta.url).href },
  { id: 'p3', name: 'Mechanical Keyboard', price: 119.99, imageUrl: new URL('../assets/keyboard.svg', import.meta.url).href },
  { id: 'p4', name: 'Headphones', price: 199.99, imageUrl: new URL('../assets/headphone.svg', import.meta.url).href }
]

export default function ProductListPage(){
  const [products, setProducts] = useState(SAMPLE)
  const [editing, setEditing] = useState(null)
  const { addToCart } = useCart()

  const handleAdd = (product) => {
    setProducts(p => [{ ...product, id: product.id || `p${Date.now()}` }, ...p])
  }

  const handleEdit = (prod) => {
    setProducts(p => p.map(x => x.id === prod.id ? prod : x))
    setEditing(null)
  }

  const handleDelete = (id) => setProducts(p => p.filter(x => x.id !== id))

  return (
    <div style={{display:'grid',gridTemplateColumns:'1fr 360px',gap:18,alignItems:'start'}}>
      <div>
        <h2 style={{marginTop:0}}>Products</h2>
        <div style={{display:'grid',gridTemplateColumns:'repeat(auto-fit,minmax(220px,1fr))',gap:16}}>
          {products.map(p => (
            <ProductCard
              key={p.id}
              {...p}
              onDelete={handleDelete}
              onEdit={() => setEditing(p)}
              onAddToCart={() => addToCart(p)}
            />
          ))}
        </div>
      </div>

      <div>
        <ProductForm initial={editing} onSubmit={(prod) => prod.id && products.some(p => p.id === prod.id) ? handleEdit(prod) : handleAdd(prod)} />
      </div>
    </div>
  )
}

        </textarea>
      </details>

      <details>
        <summary>/src/pages/CartPage.jsx</summary>
        <textarea readonly>
import React from 'react'
import { useCart } from '../context/CartContext'
import CartItem from '../components/CartItem'
import { Link, useNavigate } from 'react-router-dom'

export default function CartPage(){
  const { cart, removeFromCart, updateQuantity, total } = useCart()
  const nav = useNavigate()

  return (
    <div>
      <h2>Your Cart</h2>
      {cart.length === 0 ? (
        <div style={{padding:16,background:'#fff',borderRadius:12}}>Your cart is empty. <Link to="/">Shop now</Link></div>
      ) : (
        <div style={{display:'grid',gridTemplateColumns:'1fr 360px',gap:16}}>
          <div style={{display:'flex',flexDirection:'column',gap:12}}>
            {cart.map(item => (
              <CartItem key={item.product.id} item={item} onRemove={removeFromCart} onUpdate={updateQuantity} />
            ))}
          </div>

          <div style={{padding:16,background:'#fff',borderRadius:12,boxShadow:'0 6px 18px rgba(15,23,42,0.04)'}}>
            <div style={{display:'flex',justifyContent:'space-between'}}>
              <div className="muted">Subtotal</div>
              <div style={{fontWeight:800}}>${total.toFixed(2)}</div>
            </div>
            <div style={{marginTop:12}}>
              <button onClick={() => nav('/checkout')} style={{width:'100%',padding:'10px 12px',borderRadius:10,border:'none',background:'#2563eb',color:'#fff',cursor:'pointer'}}>Checkout</button>
            </div>
          </div>
        </div>
      )}
    </div>
  )
}

        </textarea>
      </details>

      <details>
        <summary>/src/pages/CheckoutPage.jsx</summary>
        <textarea readonly>
import React, { useState } from 'react'
import { useCart } from '../context/CartContext'
import { useNavigate } from 'react-router-dom'

export default function CheckoutPage(){
  const { cart, total, clearCart } = useCart()
  const [name, setName] = useState('')
  const [email, setEmail] = useState('')
  const [address, setAddress] = useState('')
  const [error, setError] = useState('')
  const nav = useNavigate()

  const handleSubmit = (e) => {
    e.preventDefault()
    if(!name.trim() || !email.includes('@') || !address.trim()){
      setError('Please fill name, valid email, and address')
      return
    }
    // simulate order
    alert(`Order placed! Total: $${total.toFixed(2)}`)
    clearCart()
    nav('/')
  }

  return (
    <div style={{display:'grid',gridTemplateColumns:'1fr 360px',gap:16}}>
      <form onSubmit={handleSubmit} style={{padding:16,background:'#fff',borderRadius:12,boxShadow:'0 6px 18px rgba(15,23,42,0.04)'}}>
        <h3>Checkout</h3>
        <input placeholder="Full name" value={name} onChange={e=>setName(e.target.value)} style={{width:'100%',padding:8,borderRadius:8,border:'1px solid #eef2f7',marginBottom:8}} />
        <input placeholder="Email" value={email} onChange={e=>setEmail(e.target.value)} style={{width:'100%',padding:8,borderRadius:8,border:'1px solid #eef2f7',marginBottom:8}} />
        <textarea placeholder="Address" value={address} onChange={e=>setAddress(e.target.value)} style={{width:'100%',padding:8,borderRadius:8,border:'1px solid #eef2f7',height:100}} />
        {error && <div style={{color:'red',marginTop:8}}>{error}</div>}
        <div style={{marginTop:12}}>
          <button type="submit" style={{padding:'10px 12px',borderRadius:10,border:'none',background:'#2563eb',color:'#fff',cursor:'pointer'}}>Place order</button>
        </div>
      </form>

      <aside style={{padding:16,background:'#fff',borderRadius:12,boxShadow:'0 6px 18px rgba(15,23,42,0.04)'}}>
        <h4>Summary</h4>
        <div style={{display:'flex',flexDirection:'column',gap:8}}>
          {cart.map(i => (
            <div key={i.product.id} style={{display:'flex',justifyContent:'space-between'}}>
              <div>{i.product.name} x{i.qty}</div>
              <div>${(i.product.price * i.qty).toFixed(2)}</div>
            </div>
          ))}
        </div>
        <div style={{display:'flex',justifyContent:'space-between',marginTop:12,fontWeight:800}}> <div>Total</div> <div>${total.toFixed(2)}</div></div>
      </aside>
    </div>
  )
}

        </textarea>
      </details>

      <details>
        <summary>/src/components/Navbar.jsx</summary>
        <textarea readonly>
import React from 'react'
import { Link } from 'react-router-dom'
import { useCart } from '../context/CartContext'

export default function Navbar(){
  const { count } = useCart()

  return (
    <header style={{background:'#fff',borderBottom:'1px solid #eef2f7'}}>
      <div style={{maxWidth:1000,margin:'0 auto',padding:'12px 16px',display:'flex',alignItems:'center',justifyContent:'space-between',gap:12}}>
        <Link to="/" style={{fontWeight:800,fontSize:18,color:'#111'}}>ShopMVP</Link>

        <nav style={{display:'flex',gap:12,alignItems:'center'}}>
          <Link to="/" style={{padding:'8px 12px',borderRadius:10,color:'#374151',textDecoration:'none'}}>Products</Link>
          <Link to="/cart" style={{padding:'8px 12px',borderRadius:10,background:'#f1f5f9',textDecoration:'none',display:'inline-flex',alignItems:'center',gap:8}}>
            Cart
            <span style={{background:'#2563eb',color:'#fff',width:26,height:26,display:'inline-flex',alignItems:'center',justifyContent:'center',borderRadius:999,fontSize:13}}>{count}</span>
          </Link>
        </nav>
      </div>
    </header>
  )
}

        </textarea>
      </details>

      <details>
        <summary>/src/components/ProductCard.jsx</summary>
        <textarea readonly>
import React from 'react'

export default function ProductCard({ id, name, price, imageUrl, onDelete, onEdit, onAddToCart }){
  const placeholder = "data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='800' height='600'><rect width='100%' height='100%' fill='%23f8fafc'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='28' fill='%2394a3b8'>No image</text></svg>"

  const handleImgError = (e) => {
    if (e?.target) e.target.src = placeholder
  }

  return (
    <div style={{borderRadius:12,overflow:'hidden',background:'#fff',boxShadow:'0 6px 18px rgba(15,23,42,0.06)',display:'flex',flexDirection:'column'}}>
      <img
        src={imageUrl || placeholder}
        alt={name}
        onError={handleImgError}
        style={{width:'100%',height:150,objectFit:'cover',display:'block'}}
      />

      <div style={{padding:12,display:'flex',flexDirection:'column',gap:8}}>
        <div style={{display:'flex',justifyContent:'space-between',alignItems:'center'}}>
          <h3 style={{margin:0,fontSize:16,lineHeight:1.1}}>{name}</h3>
          <div style={{background:'linear-gradient(90deg,#34d399,#06b6d4)',color:'#fff',padding:'6px 10px',borderRadius:999,fontWeight:700,fontSize:13}}>${Number(price).toFixed(2)}</div>
        </div>

        <div style={{display:'flex',gap:8,justifyContent:'space-between',alignItems:'center'}}>
          <div style={{display:'flex',gap:8}}>
            <button onClick={() => { console.log('ProductCard: Add clicked', id); onAddToCart && onAddToCart({ id, name, price, imageUrl }) }} style={{padding:'8px 12px',borderRadius:10,border:'none',background:'#2563eb',color:'#fff',cursor:'pointer'}}>Add to cart</button>
            <button onClick={() => onEdit && onEdit({ id, name, price, imageUrl })} style={{padding:'8px 12px',borderRadius:10,border:'1px solid #e6eefb',background:'transparent',color:'#111',cursor:'pointer'}}>Edit</button>
          </div>

          <button onClick={() => onDelete && onDelete(id)} style={{padding:'6px 10px',borderRadius:8,border:'none',background:'#ef4444',color:'#fff',cursor:'pointer'}}>Delete</button>
        </div>
      </div>
    </div>
  )
}

        </textarea>
      </details>

      <details>
        <summary>/src/components/ProductForm.jsx</summary>
        <textarea readonly>
import React, { useState, useEffect } from 'react'

export default function ProductForm({ onSubmit, initial }){
  const [name, setName] = useState(initial?.name || '')
  const [price, setPrice] = useState(initial?.price ?? '')
  const [file, setFile] = useState(null)
  const [preview, setPreview] = useState(initial?.imageUrl || '')

  useEffect(() => {
    if (!file) return
    const url = URL.createObjectURL(file)
    setPreview(url)
    return () => URL.revokeObjectURL(url)
  }, [file])

  useEffect(() => {
    // update when initial changes (edit flow)
    setName(initial?.name || '')
    setPrice(initial?.price ?? '')
    setPreview(initial?.imageUrl || '')
    setFile(null)
  }, [initial])

  const handleFile = (e) => {
    const f = e.target.files && e.target.files[0]
    if (f) setFile(f)
  }

  const handleSubmit = (e) => {
    e.preventDefault()
    const id = initial?.id || `p${Date.now()}`
    const imageUrl = file ? URL.createObjectURL(file) : preview || ''
    const product = { id, name: name.trim(), price: Number(price) || 0, imageUrl }
    onSubmit && onSubmit(product)
  }

  return (
    <form onSubmit={handleSubmit} style={{borderRadius:12,boxShadow:'0 6px 18px rgba(15,23,42,0.06)',background:'#fff',padding:14,display:'flex',flexDirection:'column',gap:10}}>
      <h3 style={{margin:0,fontSize:16}}>{initial ? 'Edit Product' : 'Add Product'}</h3>

      <input placeholder="Name" value={name} onChange={e=>setName(e.target.value)} style={{padding:8,borderRadius:8,border:'1px solid #eef2f7'}} />
      <input placeholder="Price" value={price} onChange={e=>setPrice(e.target.value)} type="number" step="0.01" style={{padding:8,borderRadius:8,border:'1px solid #eef2f7'}} />

      <div style={{display:'flex',gap:10,alignItems:'center'}}>
        <label style={{display:'inline-block'}}>
          <input type="file" accept="image/*" onChange={handleFile} style={{display:'none'}} />
          <div style={{padding:'8px 12px',borderRadius:10,background:'#f1f5f9',cursor:'pointer'}}>Choose image</div>
        </label>

        <div style={{width:150,height:150,background:'#f8fafc',borderRadius:8,overflow:'hidden',border:'1px solid #eef2f7'}}>
          {preview ? <img src={preview} alt="preview" style={{width:'100%',height:'100%',objectFit:'cover'}} /> : <div style={{display:'flex',alignItems:'center',justifyContent:'center',height:'100%',color:'#94a3b8'}}>Preview</div>}
        </div>
      </div>

      <div style={{display:'flex',gap:8,justifyContent:'flex-end'}}>
        <button type="submit" style={{padding:'8px 12px',borderRadius:10,border:'none',background:'#2563eb',color:'#fff',cursor:'pointer'}}>{initial ? 'Save' : 'Add'}</button>
      </div>
    </form>
  )
}

        </textarea>
      </details>

      <details>
        <summary>/src/components/CartItem.jsx</summary>
        <textarea readonly>
import React from 'react'

export default function CartItem({ item, onRemove, onUpdate }){
  if(!item || !item.product) return null

  const { product, qty } = item

  return (
    <div style={{display:'flex',gap:12,alignItems:'center',padding:12,background:'#fff',borderRadius:12,boxShadow:'0 6px 18px rgba(15,23,42,0.04)'}}>
      <img src={product.imageUrl} alt={product.name} style={{width:96,height:72,objectFit:'cover',borderRadius:8}} />

      <div style={{flex:1,display:'flex',flexDirection:'column',gap:6}}>
        <div style={{display:'flex',justifyContent:'space-between',alignItems:'center'}}>
          <div style={{fontWeight:700}}>{product.name}</div>
          <div style={{fontWeight:800}}>${(product.price * qty).toFixed(2)}</div>
        </div>

        <div style={{display:'flex',alignItems:'center',gap:8}}>
          <input type="number" min={1} value={qty} onChange={e => onUpdate && onUpdate(product.id, Math.max(1, Number(e.target.value || 1)))} style={{width:80,padding:8,borderRadius:8,border:'1px solid #eef2f7'}} />
          <button onClick={() => onRemove && onRemove(product.id)} style={{marginLeft:'auto',padding:'8px 10px',borderRadius:8,border:'none',background:'#ef4444',color:'#fff',cursor:'pointer'}}>Remove</button>
        </div>
      </div>
    </div>
  )
}

        </textarea>
      </details>

      <details>
        <summary>/src/styles/global.css</summary>
        <textarea readonly>
:root{
  --bg:#f8fafc;
  --card:#ffffff;
  --muted:#6b7280;
  --accent:#2563eb;
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui,Arial,sans-serif;background:var(--bg);color:#0f172a}
a{color:inherit}

.container{max-width:1000px;margin:24px auto;padding:0 16px}

h2{margin:0 0 12px 0}

/* responsive grid */
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}

button{transition:all .12s ease}
button:hover{transform:translateY(-2px)}

input,textarea{font-family:inherit}

/* small helpers */
.muted{color:var(--muted)}

        </textarea>
      </details>

      <details>
        <summary>/src/assets/laptop.svg</summary>
        <textarea readonly>
<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600" viewBox="0 0 800 600">
  <rect width="100%" height="100%" fill="#eef6ff"/>
  <rect x="80" y="120" width="640" height="320" rx="16" fill="#ffffff" stroke="#cfe6ff"/>
  <rect x="120" y="160" width="560" height="220" rx="8" fill="#f8fbff"/>
  <rect x="220" y="400" width="360" height="24" rx="6" fill="#dbeffd"/>
  <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="36" fill="#2563eb" font-family="Arial, Helvetica, sans-serif">Laptop Pro</text>
</svg>

        </textarea>
      </details>

      <p class="muted">If you want additional files embedded (images, other assets), tell me which ones and I'll add them.</p>
    </main>
  </body>
</html>
